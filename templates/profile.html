{% extends "base.html" %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <h2>{{ translations.welcome }}, {{ user.username }}!</h2>
        <div class="profile-stats">
            <div class="stat-item">
                <span class="stat-label">{{ translations.email }}</span>
                <span class="stat-value">{{ user.email }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">{{ translations.total_score }}</span>
                <span class="stat-value">{{ user.total_score }}</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">{{ translations.member_since }}</span>
                <span class="stat-value">{{ user.member_since }}</span>
            </div>
        </div>
    </div>

    <div class="learning-history">
        <h3>{{ translations.learning_history }}</h3>
        {% if user.learning_history %}
            <div class="sessions-list">
                {% for session in user.learning_history %}
                <div class="session-card">
                    <div class="session-header">
                        <h4>{{ translations[session.subject]['name'] }}</h4>
                        <span class="session-date">{{ session.created_at.split('T')[0] }}</span>
                    </div>
                    <div class="session-stats">
                        <div class="stat">
                            <span class="label">{{ translations.problems_attempted }}</span>
                            <span class="value">{{ session.problems_attempted }}</span>
                        </div>
                        <div class="stat">
                            <span class="label">{{ translations.problems_solved }}</span>
                            <span class="value">{{ session.problems_solved }}</span>
                        </div>
                        <div class="stat">
                            <span class="label">{{ translations.hints_used }}</span>
                            <span class="value">{{ session.hints_used }}</span>
                        </div>
                        <div class="stat">
                            <span class="label">{{ translations.session_score }}</span>
                            <span class="value">{{ session.score }}</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="no-sessions">{{ translations.no_sessions }}</p>
        {% endif %}
    </div>
</div>
{% endblock %}
